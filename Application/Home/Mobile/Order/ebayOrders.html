{__NOLAYOUT__}
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>订单列表</title>
		<link rel="stylesheet" href="__ROOT__/Public/2.0/assets/css/bootstrap.min.css">
		<!--表格排序插件-->
		<link rel="stylesheet" type="text/css" href="__ROOT__/Public/FirstEdition/assets/shu/boot/table.css" />
		<script src="__ROOT__/Public/login/assets/js/jquery-1.11.1.min.js"></script>
		<style>
			/*.table-responsive {
				overflow-x: inherit;
			}
			*/
			
			tr th {
				white-space: nowrap;
			}
		</style>
		<script>
			$('#85').parents('li').addClass('nav-active')
			$('#85').parents('li').addClass('nav-expanded')
			$('html').addClass('sidebar-left-collapsed')
		</script>
	</head>
	<body>
		<!--提交地址-->
		<input type="hidden" id="confirm" value="{:U('Order/submitOrder')}"/>
		<!-- ZUI 标准版压缩后的 CSS 文件 -->
		<!--<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/zui/1.8.1/css/zui.min.css">-->

		<!-- ZUI Javascript 依赖 jQuery -->
		<!--<script src="//cdnjs.cloudflare.com/ajax/libs/zui/1.8.1/lib/jquery/jquery.js"></script>-->
		<!-- ZUI 标准版压缩后的 JavaScript 文件 -->
		<!--<script src="//cdnjs.cloudflare.com/ajax/libs/zui/1.8.1/js/zui.min.js"></script>-->
		<p id="all_message" style="display: none;">{$orderjson}</p>
		<div style="margin: 0 20px;">
			<h2>订单列表</h2>
			<table id="table1" style="min-width: 1750px;border-collapse: collapse;" class="table table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th>序号</th>
						<th>操作</th>
						<th hidden="hidden">产品-外部关键字</th>
						<th hidden="hidden">平台产品变量</th>
						<th>ebay订单号</th>
						<th>买家ebay用户名</th>
						<th>买家姓名</th>
						<th>收件人Email</th>
						<th>收件人电话</th>
						<th>收件人地址1</th>
						<th>收件人地址2</th>
						<th>邮寄方式</th>
						<th>国家</th>
						<th>州或省</th>
						<th>市</th>
						<th>邮编</th>
					</tr>
				</thead>
				<tbody>
					<volist name="order" id="vo" key="k">
						<tr>
							<td id="{$k}_1" style="width: 80px;">{$k}</td>
							<td id="{$k}_2" style="width: 100px;"><button onclick="onm({$k})" class="btn btn-primary btn-xs">详情</button></td>
							<td id="{$k}_3" style="width: 120px;" hidden="hidden">{$vo.ebay_number}</td>
							<td id="{$k}_4" style="width: 150px;" hidden="hidden">{$vo.productname}</td>
							<td id="{$k}_5" style="width: 100px;" >{$vo.source_orderid}</td>
							<!--买家用户名-->
							<td id="{$k}_6" style="width: 100px;">{$vo.source_buyerid}</td>
							<td id="{$k}_7" style="width: 120px;">{$vo.buyer_last_name}</td>
							<td id="{$k}_8" style="width: 140px;">{$vo.buyer_email}</td>
							<td id="{$k}_9" style="width: 140px;">{$vo.buyer_phone}</td>
							<td id="{$k}_10" style="width: 160px;">{$vo.street_1}</td>
							<td id="{$k}_11" style="width: 160px;">{$vo.street_2}</td>
							<td id="{$k}_12" style="width: 120px;">{$vo.ship_level}</td>
							<td id="{$k}_13" style="width: 80px;">{$vo.country}</td>
							<td id="{$k}_14" style="width: 100px;">{$vo.state}</td>
							<td id="{$k}_15" style="width: 60px;">{$vo.city}</td>
							<td id="{$k}_16" style="width: 80px;">{$vo.zip}</td>

						</tr>
					</volist>
				</tbody>
			</table>
			<div style="padding: 20px 0;">
				<button class="btn btn-primary" onclick="sub_message()">提交</button>
				<button class="btn btn-primary" onclick="window.close()" style="margin-left: 12px;">返回</button>
			</div>
		</div>


		<div id="message_modal" class="modal fade  bs-example-modal-lg" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">
					详情 <span id="input1">1</span>
				</h4>
					</div>
					<div class="modal-body" style="line-height: 34px;">
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">产品-外部关键字</span>
								<input id="input3" type="text" class="form-control" value="1" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">平台产品变量</span>
								<input id="input4" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">订单号</span>
								<input id="input5" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">产品名</span>
								<input id="input6" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">买家姓名</span>
								<input id="input7" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">收件人Email</span>
								<input id="input8" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">收件人电话</span>
								<input id="input9" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">收件人地址1</span>
								<input id="input10" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">收件人地址2</span>
								<input id="input11" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">邮寄方式</span>
								<input id="input12" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">国家</span>
								<input id="input13" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">州或省</span>
								<input id="input14" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">市</span>
								<input id="input15" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<div class="col-md-6">
							<div class="input-group" style="padding-top: 20px;">
								<span class="input-group-addon">邮编</span>
								<input id="input16" type="text" class="form-control" value="" placeholder="">
							</div>
						</div>
						<br style="clear: both;"/>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" onclick="change_message(num)">修改</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
		</div>
	</body>

</html>
<script src="__PUBLIC__/FirstEdition/assets/vendor/bootstrap/js/bootstrap.js"></script>
<script src="__ROOT__/Public/FirstEdition/assets/shu/boot/table.js"></script>
<script>
	var num = 0;
	var arr = JSON.parse($('#all_message').html());
	$(document).ready(function() {
		$('#table1').DataTable({
			"paging": false,
			"lengthChange": false,
			"info": false,
			"searching": false
		});
	});

	function onm(n) {
		num = n;
		$('#input1').html($('#'+n+'_1').text());
		$('#input3').val($('#'+n+'_3').text());
		$('#input4').val($('#'+n+'_4').text());
		$('#input5').val($('#'+n+'_5').text());
		$('#input6').val($('#'+n+'_6').text());
		$('#input7').val($('#'+n+'_7').text());
		$('#input8').val($('#'+n+'_8').text());
		$('#input9').val($('#'+n+'_9').text());
		$('#input10').val($('#'+n+'_10').text());
		$('#input11').val($('#'+n+'_11').text());
		$('#input12').val($('#'+n+'_12').text());
		$('#input13').val($('#'+n+'_13').text());
		$('#input14').val($('#'+n+'_14').text());
		$('#input15').val($('#'+n+'_15').text());
		$('#input16').val($('#'+n+'_16').text());
		$('#message_modal').modal('toggle');
	}
	function change_message(n){
		$('#'+n+'_3').text($('#input3').val());
		$('#'+n+'_4').text($('#input4').val());
		$('#'+n+'_5').text($('#input5').val());
		$('#'+n+'_6').text($('#input6').val());
		$('#'+n+'_7').text($('#input7').val());
		$('#'+n+'_8').text($('#input8').val());
		$('#'+n+'_9').text($('#input9').val());
		$('#'+n+'_10').text($('#input10').val());
		$('#'+n+'_11').text($('#input11').val());
		$('#'+n+'_12').text($('#input12').val());
		$('#'+n+'_13').text($('#input13').val());
		$('#'+n+'_14').text($('#input14').val());
		$('#'+n+'_15').text($('#input15').val());
		$('#'+n+'_16').text($('#input16').val());
		$('#message_modal').modal('toggle');
		arr[n-1].ebay_number = $('#input3').val();
//		arr[n-1].ebay_number = $('#input4').val();
		arr[n-1].source_orderid = $('#input5').val();
//		arr[n-1].ebay_number = $('#input6').val();
		arr[n-1].buyer_last_name = $('#input7').val();
		arr[n-1].buyer_email = $('#input8').val();
		arr[n-1].buyer_phone = $('#input9').val();
		arr[n-1].street_1 = $('#input10').val();
		arr[n-1].street_2 = $('#input11').val();
		arr[n-1].ship_level = $('#input12').val();
		arr[n-1].country = $('#input13').val();
		arr[n-1].state = $('#input14').val();
		arr[n-1].city = $('#input15').val();
		arr[n-1].zip = $('#input16').val();
	}
	
	function sub_message(){
		var confirm = $("#confirm").val();
		var arr_str = JSON.stringify(arr);
		console.log(arr_str)
		console.log(typeof arr_str)
		$.ajax({
			url: confirm, //通过页面元素的ID来获取设备ID
			type: "post", //选择传值方式
//			header: 'Content-type: text/html; charset=utf8',
			data: {
				orderjson:arr_str
			},
//			dataType: "JSON",
			success: function(data) {
				console.log(data);
			},
			error: function(XMLHttpRequest, textStatus, errorThrown) {
 alert(XMLHttpRequest.status);
 alert(XMLHttpRequest.readyState);
 alert(textStatus);
   }
		})

	}
</script>