<link rel="stylesheet" type="text/css" href="__ROOT__/Public/FirstEdition/assets/shu/boot/table.css" />
<link rel="stylesheet" type="text/css" href="__ROOT__/Public/FirstEdition/assets/shu/boot/bootstrap-select.css" />
<style>
	.modal-dialog {
		margin: 60px auto !important;
	}
	
	.bootstrap-select.btn-group .dropdown-toggle .filter-option {
		padding-left: 5px;
		padding-top: 3px;
		color: #666;
	}
	
	.bootstrap-select {
		width: 50% !important;
	}
	
	.bootstrap-select>button {
		height: 100%;
		line-height: 100%;
	}
	
	.bootstrap-select>button:active {
		background: #fff !important;
	}
	
	.bootstrap-select>button:hover {
		background: #fff !important;
	}
	
	.bootstrap-select>button:focus {
		background: #fff !important;
	}
	
	.caret {
		color: #333 !important;
	}
	
	.wrap {
		margin: 0 auto;
		/*padding: 20px;*/
		width: 210mm;
		height: 297mm;
		/*border:1px solid #ccc;*/
	}
	
	#wrap ul,
	#wrap p {
		padding: 0;
		margin: 0;
	}
	
	#wrap li {
		padding: 20px;
		list-style: none;
		box-sizing: border-box;
		/*border: 1px solid #ccc;*/
	}
	
	.left p {
		font-size: 12px;
		line-height: 18px;
		white-space: nowrap;
	}
	
	.left {
		margin-top: -4px;
		margin-left: -26px;
		-webkit-transform: scale(0.7, 0.7);
		-moz-transform: scale(0.7, 0.7);
		-o-transform: scale(0.7, 0.7);
		transform: scale(0.7, 0.7);
	}
	
	.middle {
		padding-top: 20px;
		position: relative;
		width: 76%;
	}
	
	.middle p {
		font-size: 12px;
		font-weight: bold;
		line-height: 20px;
	}
	
	.name1 {
		-webkit-transform: scale(0.8, 0.8);
		-moz-transform: scale(0.8, 0.8);
		-o-transform: scale(0.8, 0.8);
		transform: scale(0.8, 0.8);
	}
	
	#details_img {
		text-align: center;
	}
	
	#details_img>div {
		display: inline-block;
		width: 20%;
		position: relative;
		margin: 0 2% 2%;
	}
	
	#details_img img {
		width: 100%;
	}
	
	#details_img p {
		position: absolute;
		top: 0;
		right: 0;
		line-height: 16px;
		text-align: center;
		font-size: 16px;
		color: red;
		font-weight: bold;
	}
</style>
<script>
	$('#26').parents('li').addClass('nav-active')
	$('#26').parents('li').addClass('nav-expanded')
</script>
<input type="hidden" id="orderdetails" name="orderdetails" value="{:U('Deliverycenter/orderdetails')}">
<input type="hidden" id="problem" />
<input id="areaing" type="hidden" value="{$areaing}" />
<p id="send_message" style="display: none;"></p>
<p id="all_message" style="display: none;">{$orderjson}</p>
<div id="node_message" style="position: fixed;top: 50%;left: 50%;display: none;background: #888;min-width:300px;margin-left: -150px;margin-top:-15px;border-radius: 8px;text-align: center;font-size: 16px;padding: 12px 20px;color: #fff;z-index: 1200;"></div>
<div class="row">
	<div class="col-md-12">
		<section class="panel">
			<header class="panel-heading">
				<div class="panel-actions">
					<a href="#" class="panel-action panel-action-toggle" data-panel-toggle=""></a>
					<a href="#" class="panel-action panel-action-dismiss" data-panel-dismiss=""></a>
				</div>

				<h2 class="panel-title">料号：<a target="_blank" href="{:U('Product/homeProduct',array('pid'=>$vo[pid]),'')}"><span style="color: red;">{$info.bclassc_number}.{$info.sclassc_number}.{$info.snumber_number}</span></a></h2>
				<h2 class="panel-title">产品名称：<a target="_blank" href="{:U('Product/homeProduct',array('pid'=>$vo[pid]),'')}"><span style="color: red;">{$info.namezh}</span></a></h2>
			</header>

			<div class="panel-body">
				<!--<form id="country_form" action="{:U('Order/saleStatistics','','')}" method="get" style="float: left;min-width: 240px;">
					<div class="input-group" style="float: left;width: 160px;margin-right: 10px;">
						<span class="input-group-addon">
							显示数量
              			</span>
              			<input type="hidden" name="pid" value="{$info.pid}">
						<input type="hidden" id="pag" value="{$pagen}">
						<select id="pagen" name="pagen" class="form-control" data-plugin-multiselect data-plugin-options='{ "maxHeight": 200}'>
							<option value="10">10</option>
							<option value="50">50</option>
							<option value="100">100</option>
							<option value="500">500</option>
						</select>
					</div>
					<button type="submit" class="btn btn-primary">确定</button>
				</form>-->
				<table id="table1" class="table table-hover table-bordered table-striped" style="border-collapse: collapse;">
					<thead>
						<tr>
							<td>国家</td>
							<td>订单数量</td>
							<td>产品数量</td>
							<td>详情</td>
						</tr>
					</thead>
					<tbody>
						<volist name="list" id="vo">
							<tr>
								<!--<td id="{$key}_1">{$key+1}</td>-->
								<td id="{$key}_2">{$vo.countryus}</td>
								<td id="{$key}_3">{$vo.count}</td>
								<td id="{$key}_5">{$vo.number}</td>
								<td id="{$key}_6">
									<a style="color: #fff;" type="button" target="_blank" href="{:U('Order/manageOrder',array('pid'=>$vo['pid'],'country'=>$vo['countryus']))}" class="btn btn-info btn-xs">详情</a>
								</td>
							</tr>
						</volist>
					</tbody>
				</table>
				<button type="button" id="product_list" class="btn btn-primary" onclick="mpdf()" style="display: none;">产品清单</button>
				<button type="button" id="bulk_print" class="btn btn-warning" onclick="print_order()" style="display: none;">批量打印</button>
				<button type="button" id="print_complete" class="btn btn-info" onclick="notship()" style="display: none;">打印完成</button>
				<!--<button type="button" id="product_list" class="btn btn-warning" onclick="product_list()" style="">产品清单</button>-->
				<ul class="pager" style="width: 100%;">
					<!-- 分页显示 -->{$page}</ul>
			</div>
		</section>
	</div>
</div>

<div id="print_modal" class="modal fade  bs-example-modal-lg" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">
					批量打印
				</h4>
			</div>
			<div class="modal-body" style="line-height: 34px;">
				<div id="wrap" class="wrap">
					<div class="con" style="height: 100%;">
						<ul style="height: 100%;" id="ul_content">

						</ul>
					</div>
				</div>
				<br style="clear: both;" />
			</div>
			<div class="modal-footer">
				<button class="btn no-print btn-primary" id="print_btn">点击开始打印</button>
				<!--<button type="button" class="btn btn-primary" onclick="change_message(num)">修改</button>-->
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div>
		<!-- /.modal-content -->
	</div>
</div>

<div id="details_modal" class="modal fade  bs-example-modal-lg" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">
					产品清单 
				</h4>
			</div>
			<div class="modal-body" id="details_body" style="line-height: 34px;">
				<div class="wrap" id="product_modal">
					<table class="table table-hover table-bordered table-striped" style="border-collapse: collapse;text-align: center;">
						<thead>
							<tr>
								<th style="text-align: center;">序号</th>
								<th style="text-align: center;">料号</th>
								<th style="text-align: center;">产品名称</th>
								<th style="text-align: center;">产品数量</th>
							</tr>
						</thead>
						<tbody id="details_tbody">
						</tbody>
					</table>
				</div>
				<div class="col-md-12" id="details_img">

				</div>
				<br style="clear: both;" />
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" onclick='$("#product_modal").print()'>打印</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div>
		<!-- /.modal-content -->
	</div>
</div>
<script>
	var country = $('#country').val();
	$('#selector').val(country);
	var pagen = $('#pag').val();
	$('#pagen').val(pagen);
	if($('#selector').val() != "") {
		$('#status_div').css('display', 'table');
	} else {
		$('#status_div').css('display', 'none');
	}
	var status_id = $('#status_id').val();
	if(status_id != "") {
		$('#selectord').val(status_id);
	} else {
		$('#selectord').val("3");
	}

	if(status_id == 3 || status_id == 4) {
		$('#bulk_print').css('display', 'inline-block');
	} else {
		$('#bulk_print').css('display', 'none');
	}
	if(status_id == 3 || status_id == 4 || status_id == 5) {
		$('#product_list').css('display', 'inline-block');
	} else {
		$('#product_list').css('display', 'none');
	}
	if(status_id == 4) {
		$('#print_complete').css('display', 'inline-block');
	} else {
		$('#print_complete').css('display', 'none');
	}
</script>
<script src="__ROOT__/Public/FirstEdition/assets/shu/boot/print.js"></script>
<script src="__ROOT__/Public/FirstEdition/assets/shu/boot/table.js"></script>
<script src="__ROOT__/Public/FirstEdition/assets/shu/boot/bootstrap-select.js"></script>
<!--<script src="__ROOT__/Public/FirstEdition/assets/shu/boot/jsbarcode.js"></script>-->
<script src="__ROOT__/Public/FirstEdition/assets/shu/boot/jquery.qrcode.min.js"></script>
<script>
	//打印
	var num = 0;
	var arr1 = "";
	var pid_arr = [],
		pid_length = "",
		pid_arr1 = [];
	if($('#all_message').text() != "") {
		arr1 = JSON.parse($('#all_message').html());
	}
	//下拉状态改变
	$('#pagen').on('change', function() {
		$('#country_form').submit();
	})

	//表格插件
	$(document).ready(function() {
		$('#table1').DataTable({
			"paging": false,
			"lengthChange": false,
			"info": false,
			"searching": false
		});
	});

	//全选、反选
	$(function() {
		var changetotal = function() {
			//获取所选中的行
			var checked_checkbox = $('.row_check:checked');
		};
		$('.check-all').prop('checked', 'checked');
		$('.row_check').prop('checked', 'checked');
		$('.check-all').change(function() {
			var status = $(this).prop('checked');
			$('.row_check').prop('checked', status);
			changetotal();
		});

		$('.row_check').change(function() {
			changetotal();
			var checkbox_all = $('.row_check');
			var checkbox_checked = $('.row_check:checked');
			var status = checkbox_all.length == checkbox_checked.length;
			$('.check-all').prop('checked', status);
		});
	});
	//全选
	$('.check-all').change(function() {
		var status = $(this).prop('checked');
		$('.row_check').prop('checked', status);
	});
</script>